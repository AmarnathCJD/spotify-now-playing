package handler

import (
	"encoding/base64"
	"encoding/json"
	"io"
	"net/http"
	"os"
	"strings"

	dotenv "github.com/joho/godotenv"
)

func CurrentPlaying(w http.ResponseWriter, r *http.Request) {
	dotenv.Load()
	svg := r.URL.Query().Get("svg") == "true"
	dark := r.URL.Query().Get("dark") == "true"
	var SPOTIFY_COOKIE = os.Getenv("SPOTIFY_COOKIE")

	if SPOTIFY_COOKIE == "" {
		http.Error(w, `{"error": "missing 'SPOTIFY_COOKIE', set your 'sp_dc' cookie from open.spotify.com"}`, http.StatusInternalServerError)
		return
	}

	w.Header().Set("Content-Type", "application/json")
	w.Header().Set("Access-Control-Allow-Origin", "*")

	currentPlaying, err := getCurrentPlaying(SPOTIFY_COOKIE, svg, dark)
	if err != nil {
		http.Error(w, `{"error": "failed to get current playing song: `+err.Error()+`"}`, http.StatusInternalServerError)
		return
	}

	if svg {
		w.Header().Set("Content-Type", "image/svg+xml")
	} else {
		w.Header().Set("Content-Type", "application/json")
	}

	w.Write(currentPlaying)
}

func getCurrentPlaying(cookie string, svg bool, darkMode bool) ([]byte, error) {
	client := &http.Client{}
	req, err := http.NewRequest("GET", "https://open.spotify.com/get_access_token", nil)
	if err != nil {
		return nil, err
	}
	req.Header.Set("cookie", "sp_dc="+cookie)
	resp, err := client.Do(req)
	if err != nil {
		return nil, err
	}

	defer resp.Body.Close()
	var respBody struct {
		AccessToken string `json:"accessToken"`
		IsAnonymous bool   `json:"isAnonymous"`
	}

	json.NewDecoder(resp.Body).Decode(&respBody)

	req, _ = http.NewRequest("GET", "https://api.spotify.com/v1/me/player/currently-playing", nil)
	req.Header.Set("Authorization", "Bearer "+respBody.AccessToken)

	resp, err = client.Do(req)
	if err != nil {
		return nil, err
	}

	defer resp.Body.Close()

	var currentTrack CurrentTrack
	json.NewDecoder(resp.Body).Decode(&currentTrack)

	if svg && (currentTrack.Item.Name == "") {
		svg, _ := base64.StdEncoding.DecodeString(`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMjAiIGhlaWdodD0iODQiIGFyaWEtbGFiZWxsZWRieT0iY2FyZFRpdGxlIj48Zm9yZWlnbk9iamVjdCB3aWR0aD0iMzIwIiBoZWlnaHQ9Ijg0Ij48c3R5bGU+ZGl2e2ZvbnQtZmFtaWx5Oi1hcHBsZS1zeXN0ZW0sQmxpbmtNYWNTeXN0ZW1Gb250LFNlZ29lIFVJLEhlbHZldGljYSxBcmlhbCxzYW5zLXNlcmlmLEFwcGxlIENvbG9yIEVtb2ppLFNlZ29lIFVJIEVtb2ppfS5wbGF5aW5ne2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2FsaWduLWl0ZW1zOmNlbnRlcjtjb2xvcjojNTNiMTRmO2ZvbnQtd2VpZ2h0OjcwMDt0ZXh0LWFsaWduOmNlbnRlcjttYXJnaW4tYm90dG9tOjhweH0ubm90LXBsYXl7Y29sb3I6IzU4ZmYxNjt0ZXh0LWFsaWduOmNlbnRlcjttYXJnaW4tYm90dG9tOjB9PC9zdHlsZT48ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBjbGFzcz0iY29udGFpbmVyIj48ZGl2IGNsYXNzPSJwbGF5aW5nIG5vdC1wbGF5Ij5Ob3RoaW5nIHBsYXlpbmcgb24gU3BvdGlmeTwvZGl2PjwvZGl2PjwvZm9yZWlnbk9iamVjdD48L3N2Zz4=`)

		if darkMode {
			svg, _ = base64.StdEncoding.DecodeString(`PHN2ZyBhcmlhLWxhYmVsbGVkYnk9Y2FyZFRpdGxlIGhlaWdodD04NCB3aWR0aD0zMjAgeG1sbnM9aHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmc+PGZvcmVpZ25PYmplY3QgaGVpZ2h0PTg0IHdpZHRoPTMyMD48c3R5bGU+ZGl2e2ZvbnQtZmFtaWx5Oi1hcHBsZS1zeXN0ZW0sQmxpbmtNYWNTeXN0ZW1Gb250LFNlZ29lIFVJLEhlbHZldGljYSxBcmlhbCxzYW5zLXNlcmlmLEFwcGxlIENvbG9yIEVtb2ppLFNlZ29lIFVJIEVtb2ppO2JhY2tncm91bmQtY29sb3I6IzFlMWUxZTtjb2xvcjojZmZmfS5wbGF5aW5ne2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2FsaWduLWl0ZW1zOmNlbnRlcjtmb250LXdlaWdodDo3MDA7dGV4dC1hbGlnbjpjZW50ZXI7bWFyZ2luLWJvdHRvbTo4cHh9Lm5vdC1wbGF5e2NvbG9yOiM1OGZmMTY7dGV4dC1hbGlnbjpjZW50ZXI7bWFyZ2luLWJvdHRvbTowfTwvc3R5bGU+PGRpdiBjbGFzcz1jb250YWluZXIgeG1sbnM9aHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbD48ZGl2IGNsYXNzPSJub3QtcGxheSBwbGF5aW5nIj5Ob3RoaW5nIHBsYXlpbmcgb24gU3BvdGlmeTwvZGl2PjwvZGl2PjwvZm9yZWlnbk9iamVjdD48L3N2Zz4=`)

			return svg, nil
		}

		return svg, nil
	}

	result := map[string]interface{}{
		"timestamp":   currentTrack.Timestamp,
		"progress_ms": currentTrack.ProgressMs,
		"title":       currentTrack.Item.Name,
		"duration_ms": currentTrack.Item.DurationMs,
		"url":         currentTrack.Item.ExternalUrls.Spotify,
		"is_playing":  currentTrack.IsPlaying,
	}

	if len(currentTrack.Item.Artists) > 0 {
		result["artists"] = func() string {
			var artists []string
			for _, artist := range currentTrack.Item.Artists {
				artists = append(artists, artist.Name)
				if len(artists) >= 2 {
					break
				}
			}
			return strings.Join(artists, ", ")
		}()
	}

	if len(currentTrack.Item.Album.Images) > 0 {
		result["image"] = currentTrack.Item.Album.Images[0].URL
	}

	if svg {
		return []byte(createSpotifyWidget(result, darkMode)), nil
	}

	return json.MarshalIndent(result, "", "  ")
}

type CurrentTrack struct {
	Timestamp  int64 `json:"timestamp"`
	ProgressMs int   `json:"progress_ms"`
	Item       struct {
		Album struct {
			Images []struct {
				URL string `json:"url"`
			} `json:"images"`
		} `json:"album"`
		Artists []struct {
			Name string `json:"name"`
		} `json:"artists"`
		DurationMs   int `json:"duration_ms"`
		ExternalUrls struct {
			Spotify string `json:"spotify"`
		} `json:"external_urls"`
		Name string `json:"name"`
	} `json:"item"`
	IsPlaying bool `json:"is_playing"`
}

func createSpotifyWidget(currentTrack map[string]interface{}, darkMode bool) string {
	svgTemplateBase64 := `PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMzIwIiBoZWlnaHQ9Ijg0IiBhcmlhLWxhYmVsbGVkYnk9ImNhcmRUaXRsZSIgcm9sZT0iaW1nIj48bGluayB4bWxucz0iIiB0eXBlPSJ0ZXh0L2NzcyIgaWQ9ImRhcmstbW9kZSIgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSIiLz48bGluayB4bWxucz0iIiB0eXBlPSJ0ZXh0L2NzcyIgaWQ9ImRhcmstbW9kZSIgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSIiLz4KICA8dGl0bGUgaWQ9ImNhcmRUaXRsZSI+Tm93IHBsYXlpbmcgb24gU3BvdGlmeTwvdGl0bGU+CiAgPGZvcmVpZ25PYmplY3Qgd2lkdGg9IjMyMCIgaGVpZ2h0PSI4NCI+CiAgICA8c3R5bGU+CiAgICAgIGRpdiB7CiAgICAgICAgZm9udC1mYW1pbHk6IC1hcHBsZS1zeXN0ZW0sIEJsaW5rTWFjU3lzdGVtRm9udCwgU2Vnb2UgVUksIEhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWYsIEFwcGxlIENvbG9yIEVtb2ppLCBTZWdvZSBVSSBFbW9qaTsKICAgICAgfQoKICAgICAgLmNvbnRhaW5lciB7CiAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOwoKICAgICAgICBib3JkZXItcmFkaXVzOiAxMHB4OwoKICAgICAgICBwYWRkaW5nOiAxMHB4IDEwcHgKICAgICAgfQoKICAgICAgLmNvdmVyLWxpbmsgewogICAgICAgIGhlaWdodDogNjRweDsKICAgICAgfQoKICAgICAgLmNvdmVyIHsKICAgICAgICBib3JkZXItcmFkaXVzOiAxcHg7CgogICAgICAgIG1hcmdpbi1yaWdodDogMTBweDsKICAgICAgfQoKICAgICAgLnBsYXlpbmcgewogICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKCiAgICAgICAgY29sb3I6ICM1M2IxNGY7CiAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwoKICAgICAgICBtYXJnaW4tYm90dG9tOiA4cHg7CiAgICAgIH0KCiAgICAgIC5ub3QtcGxheSB7CiAgICAgICAgY29sb3I6ICNmZjE2MTY7CiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwoKCQltYXJnaW4tYm90dG9tOiAwOwogICAgICB9CgogICAgICAuYXJ0aXN0IHsKICAgICAgICBjb2xvcjogIzEyMTIxMjsKICAgICAgICBmb250LXdlaWdodDogNTAwOwogICAgICAgIGZvbnQtc2l6ZTogMTRweDsKCiAgICAgICAgbWFyZ2luLWJvdHRvbTogM3B4OwogICAgICB9CgogICAgICAuc29uZyB7CiAgICAgICAgY29sb3I6ICMyMTIxMjI7CiAgICAgICAgZm9udC1zaXplOiAxNHB4OwoKICAgICAgICBtYXJnaW4tYm90dG9tOiAxOHB4OwogICAgICB9CgogICAgICBAbWVkaWEgKHByZWZlcnMtY29sb3Itc2NoZW1lOiBsaWdodCkgewogICAgICAgIC5hcnRpc3R7CiAgICAgICAgICBjb2xvcjogIzEyMTIxMjsKICAgICAgICB9CgogICAgICAgIC5zb25newogICAgICAgICAgY29sb3I6ICMyMTIxMjI7CiAgICAgICAgfQogICAgICB9CgogICAgICBAbWVkaWEgKHByZWZlcnMtY29sb3Itc2NoZW1lOiBkYXJrKSB7CiAgICAgICAgLmFydGlzdHsKICAgICAgICAgIGNvbG9yOiAjZjRmNGY0OwogICAgICAgIH0KCiAgICAgICAgLnNvbmd7CiAgICAgICAgICBjb2xvcjogI2RiZGJkYzsKICAgICAgICB9CiAgICAgIH0KCiAgICAgICNiYXJzIHsKICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICAgICAgaGVpZ2h0OiA2cHg7CiAgICAgICAgd2lkdGg6IDIyMHB4OwogICAgICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICAgICAgbWFyZ2luOiAtNnB4IDAgMCAwcHg7CiAgICAgIH0KCiAgICAgIC5iYXIgewogICAgICAgIGJhY2tncm91bmQ6ICM1M2IxNGY7CiAgICAgICAgYm90dG9tOiAxcHg7CiAgICAgICAgaGVpZ2h0OiAzcHg7CiAgICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICAgIHdpZHRoOiAzcHg7CiAgICAgICAgYW5pbWF0aW9uOiBzb3VuZCAwbXMgLTgwMG1zIGxpbmVhciBpbmZpbml0ZSBhbHRlcm5hdGU7CiAgICAgIH0KCiAgICAgIEBrZXlmcmFtZXMgc291bmQgewogICAgICAgIDAlIHsKICAgICAgICAgIG9wYWNpdHk6IC4zNTsKICAgICAgICAgIGhlaWdodDogM3B4OwogICAgICAgIH0KCiAgICAgICAgMTAwJSB7CiAgICAgICAgICBvcGFjaXR5OiAxOwogICAgICAgICAgaGVpZ2h0OiA2cHg7CiAgICAgICAgfQogICAgICB9CgogICAgICAuYmFyOm50aC1jaGlsZCgxKSAgeyBsZWZ0OiAxcHg7IGFuaW1hdGlvbi1kdXJhdGlvbjogNDk4bXM7IH0uYmFyOm50aC1jaGlsZCgyKSAgeyBsZWZ0OiA1cHg7IGFuaW1hdGlvbi1kdXJhdGlvbjogMzg4bXM7IH0uYmFyOm50aC1jaGlsZCgzKSAgeyBsZWZ0OiA5cHg7IGFuaW1hdGlvbi1kdXJhdGlvbjogMzk1bXM7IH0uYmFyOm50aC1jaGlsZCg0KSAgeyBsZWZ0OiAxM3B4OyBhbmltYXRpb24tZHVyYXRpb246IDM1NW1zOyB9LmJhcjpudGgtY2hpbGQoNSkgIHsgbGVmdDogMTdweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0MzZtczsgfS5iYXI6bnRoLWNoaWxkKDYpICB7IGxlZnQ6IDIxcHg7IGFuaW1hdGlvbi1kdXJhdGlvbjogNDQ3bXM7IH0uYmFyOm50aC1jaGlsZCg3KSAgeyBsZWZ0OiAyNXB4OyBhbmltYXRpb24tZHVyYXRpb246IDM2NW1zOyB9LmJhcjpudGgtY2hpbGQoOCkgIHsgbGVmdDogMjlweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiAzODltczsgfS5iYXI6bnRoLWNoaWxkKDkpICB7IGxlZnQ6IDMzcHg7IGFuaW1hdGlvbi1kdXJhdGlvbjogNDU5bXM7IH0uYmFyOm50aC1jaGlsZCgxMCkgIHsgbGVmdDogMzdweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiAzNzhtczsgfS5iYXI6bnRoLWNoaWxkKDExKSAgeyBsZWZ0OiA0MXB4OyBhbmltYXRpb24tZHVyYXRpb246IDM5OW1zOyB9LmJhcjpudGgtY2hpbGQoMTIpICB7IGxlZnQ6IDQ1cHg7IGFuaW1hdGlvbi1kdXJhdGlvbjogNDEzbXM7IH0uYmFyOm50aC1jaGlsZCgxMykgIHsgbGVmdDogNDlweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0NThtczsgfS5iYXI6bnRoLWNoaWxkKDE0KSAgeyBsZWZ0OiA1M3B4OyBhbmltYXRpb24tZHVyYXRpb246IDM3MG1zOyB9LmJhcjpudGgtY2hpbGQoMTUpICB7IGxlZnQ6IDU3cHg7IGFuaW1hdGlvbi1kdXJhdGlvbjogMzY0bXM7IH0uYmFyOm50aC1jaGlsZCgxNikgIHsgbGVmdDogNjFweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0NTFtczsgfS5iYXI6bnRoLWNoaWxkKDE3KSAgeyBsZWZ0OiA2NXB4OyBhbmltYXRpb24tZHVyYXRpb246IDM1Mm1zOyB9LmJhcjpudGgtY2hpbGQoMTgpICB7IGxlZnQ6IDY5cHg7IGFuaW1hdGlvbi1kdXJhdGlvbjogMzU0bXM7IH0uYmFyOm50aC1jaGlsZCgxOSkgIHsgbGVmdDogNzNweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0MzltczsgfS5iYXI6bnRoLWNoaWxkKDIwKSAgeyBsZWZ0OiA3N3B4OyBhbmltYXRpb24tZHVyYXRpb246IDM5OW1zOyB9LmJhcjpudGgtY2hpbGQoMjEpICB7IGxlZnQ6IDgxcHg7IGFuaW1hdGlvbi1kdXJhdGlvbjogNDMxbXM7IH0uYmFyOm50aC1jaGlsZCgyMikgIHsgbGVmdDogODVweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0MzJtczsgfS5iYXI6bnRoLWNoaWxkKDIzKSAgeyBsZWZ0OiA4OXB4OyBhbmltYXRpb24tZHVyYXRpb246IDM3Nm1zOyB9LmJhcjpudGgtY2hpbGQoMjQpICB7IGxlZnQ6IDkzcHg7IGFuaW1hdGlvbi1kdXJhdGlvbjogNTAwbXM7IH0uYmFyOm50aC1jaGlsZCgyNSkgIHsgbGVmdDogOTdweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0NjJtczsgfS5iYXI6bnRoLWNoaWxkKDI2KSAgeyBsZWZ0OiAxMDFweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0NjdtczsgfS5iYXI6bnRoLWNoaWxkKDI3KSAgeyBsZWZ0OiAxMDVweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0ODVtczsgfS5iYXI6bnRoLWNoaWxkKDI4KSAgeyBsZWZ0OiAxMDlweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0OTRtczsgfS5iYXI6bnRoLWNoaWxkKDI5KSAgeyBsZWZ0OiAxMTNweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiAzNjhtczsgfS5iYXI6bnRoLWNoaWxkKDMwKSAgeyBsZWZ0OiAxMTdweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiAzNjNtczsgfS5iYXI6bnRoLWNoaWxkKDMxKSAgeyBsZWZ0OiAxMjFweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiAzNjNtczsgfS5iYXI6bnRoLWNoaWxkKDMyKSAgeyBsZWZ0OiAxMjVweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0MDZtczsgfS5iYXI6bnRoLWNoaWxkKDMzKSAgeyBsZWZ0OiAxMjlweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0NjdtczsgfS5iYXI6bnRoLWNoaWxkKDM0KSAgeyBsZWZ0OiAxMzNweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiAzNzRtczsgfS5iYXI6bnRoLWNoaWxkKDM1KSAgeyBsZWZ0OiAxMzdweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0MjFtczsgfS5iYXI6bnRoLWNoaWxkKDM2KSAgeyBsZWZ0OiAxNDFweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0OTBtczsgfS5iYXI6bnRoLWNoaWxkKDM3KSAgeyBsZWZ0OiAxNDVweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiAzOThtczsgfS5iYXI6bnRoLWNoaWxkKDM4KSAgeyBsZWZ0OiAxNDlweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiAzODZtczsgfS5iYXI6bnRoLWNoaWxkKDM5KSAgeyBsZWZ0OiAxNTNweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0MjFtczsgfS5iYXI6bnRoLWNoaWxkKDQwKSAgeyBsZWZ0OiAxNTdweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0MDJtczsgfS5iYXI6bnRoLWNoaWxkKDQxKSAgeyBsZWZ0OiAxNjFweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0ODltczsgfS5iYXI6bnRoLWNoaWxkKDQyKSAgeyBsZWZ0OiAxNjVweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0MzNtczsgfS5iYXI6bnRoLWNoaWxkKDQzKSAgeyBsZWZ0OiAxNjlweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0NDFtczsgfS5iYXI6bnRoLWNoaWxkKDQ0KSAgeyBsZWZ0OiAxNzNweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0MDhtczsgfS5iYXI6bnRoLWNoaWxkKDQ1KSAgeyBsZWZ0OiAxNzdweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0MzltczsgfS5iYXI6bnRoLWNoaWxkKDQ2KSAgeyBsZWZ0OiAxODFweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0MTdtczsgfS5iYXI6bnRoLWNoaWxkKDQ3KSAgeyBsZWZ0OiAxODVweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0NzFtczsgfS5iYXI6bnRoLWNoaWxkKDQ4KSAgeyBsZWZ0OiAxODlweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0MzltczsgfS5iYXI6bnRoLWNoaWxkKDQ5KSAgeyBsZWZ0OiAxOTNweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0ODVtczsgfS5iYXI6bnRoLWNoaWxkKDUwKSAgeyBsZWZ0OiAxOTdweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiAzNjZtczsgfS5iYXI6bnRoLWNoaWxkKDUxKSAgeyBsZWZ0OiAyMDFweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0MDZtczsgfS5iYXI6bnRoLWNoaWxkKDUyKSAgeyBsZWZ0OiAyMDVweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0MThtczsgfS5iYXI6bnRoLWNoaWxkKDUzKSAgeyBsZWZ0OiAyMDlweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0ODFtczsgfS5iYXI6bnRoLWNoaWxkKDU0KSAgeyBsZWZ0OiAyMTNweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0MTFtczsgfS5iYXI6bnRoLWNoaWxkKDU1KSAgeyBsZWZ0OiAyMTdweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiAzNjZtczsgfS5iYXI6bnRoLWNoaWxkKDU2KSAgeyBsZWZ0OiAyMjFweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0ODhtczsgfS5iYXI6bnRoLWNoaWxkKDU3KSAgeyBsZWZ0OiAyMjVweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0NjhtczsgfS5iYXI6bnRoLWNoaWxkKDU4KSAgeyBsZWZ0OiAyMjlweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0NzBtczsgfS5iYXI6bnRoLWNoaWxkKDU5KSAgeyBsZWZ0OiAyMzNweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0NzVtczsgfS5iYXI6bnRoLWNoaWxkKDYwKSAgeyBsZWZ0OiAyMzdweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0NTVtczsgfS5iYXI6bnRoLWNoaWxkKDYxKSAgeyBsZWZ0OiAyNDFweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0NDhtczsgfS5iYXI6bnRoLWNoaWxkKDYyKSAgeyBsZWZ0OiAyNDVweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0NTJtczsgfS5iYXI6bnRoLWNoaWxkKDYzKSAgeyBsZWZ0OiAyNDlweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0ODhtczsgfS5iYXI6bnRoLWNoaWxkKDY0KSAgeyBsZWZ0OiAyNTNweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiAzOTltczsgfS5iYXI6bnRoLWNoaWxkKDY1KSAgeyBsZWZ0OiAyNTdweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0MzVtczsgfS5iYXI6bnRoLWNoaWxkKDY2KSAgeyBsZWZ0OiAyNjFweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiAzNjNtczsgfS5iYXI6bnRoLWNoaWxkKDY3KSAgeyBsZWZ0OiAyNjVweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0ODdtczsgfS5iYXI6bnRoLWNoaWxkKDY4KSAgeyBsZWZ0OiAyNjlweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiAzNTVtczsgfS5iYXI6bnRoLWNoaWxkKDY5KSAgeyBsZWZ0OiAyNzNweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0NDBtczsgfS5iYXI6bnRoLWNoaWxkKDcwKSAgeyBsZWZ0OiAyNzdweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0NzNtczsgfS5iYXI6bnRoLWNoaWxkKDcxKSAgeyBsZWZ0OiAyODFweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiAzNjBtczsgfS5iYXI6bnRoLWNoaWxkKDcyKSAgeyBsZWZ0OiAyODVweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0NDJtczsgfS5iYXI6bnRoLWNoaWxkKDczKSAgeyBsZWZ0OiAyODlweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0MTNtczsgfS5iYXI6bnRoLWNoaWxkKDc0KSAgeyBsZWZ0OiAyOTNweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiAzNTNtczsgfS5iYXI6bnRoLWNoaWxkKDc1KSAgeyBsZWZ0OiAyOTdweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiAzNzJtczsgfS5iYXI6bnRoLWNoaWxkKDc2KSAgeyBsZWZ0OiAzMDFweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiAzOTltczsgfS5iYXI6bnRoLWNoaWxkKDc3KSAgeyBsZWZ0OiAzMDVweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0MTNtczsgfS5iYXI6bnRoLWNoaWxkKDc4KSAgeyBsZWZ0OiAzMDlweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiAzNzVtczsgfS5iYXI6bnRoLWNoaWxkKDc5KSAgeyBsZWZ0OiAzMTNweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0OTJtczsgfS5iYXI6bnRoLWNoaWxkKDgwKSAgeyBsZWZ0OiAzMTdweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiAzOTRtczsgfS5iYXI6bnRoLWNoaWxkKDgxKSAgeyBsZWZ0OiAzMjFweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0MTBtczsgfS5iYXI6bnRoLWNoaWxkKDgyKSAgeyBsZWZ0OiAzMjVweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0MTltczsgfS5iYXI6bnRoLWNoaWxkKDgzKSAgeyBsZWZ0OiAzMjlweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiAzNTZtczsgfS5iYXI6bnRoLWNoaWxkKDg0KSAgeyBsZWZ0OiAzMzNweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0NTVtczsgfS5iYXI6bnRoLWNoaWxkKDg1KSAgeyBsZWZ0OiAzMzdweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0MTVtczsgfS5iYXI6bnRoLWNoaWxkKDg2KSAgeyBsZWZ0OiAzNDFweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiAzNzltczsgfS5iYXI6bnRoLWNoaWxkKDg3KSAgeyBsZWZ0OiAzNDVweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiAzOThtczsgfS5iYXI6bnRoLWNoaWxkKDg4KSAgeyBsZWZ0OiAzNDlweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0ODRtczsgfS5iYXI6bnRoLWNoaWxkKDg5KSAgeyBsZWZ0OiAzNTNweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0MTRtczsgfS5iYXI6bnRoLWNoaWxkKDkwKSAgeyBsZWZ0OiAzNTdweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0NzNtczsgfS5iYXI6bnRoLWNoaWxkKDkxKSAgeyBsZWZ0OiAzNjFweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0MTFtczsgfS5iYXI6bnRoLWNoaWxkKDkyKSAgeyBsZWZ0OiAzNjVweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0ODZtczsgfS5iYXI6bnRoLWNoaWxkKDkzKSAgeyBsZWZ0OiAzNjlweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0MzdtczsgfS5iYXI6bnRoLWNoaWxkKDk0KSAgeyBsZWZ0OiAzNzNweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0MTdtczsgfS5iYXI6bnRoLWNoaWxkKDk1KSAgeyBsZWZ0OiAzNzdweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiAzODRtczsgfS5iYXI6bnRoLWNoaWxkKDk2KSAgeyBsZWZ0OiAzODFweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0NTdtczsgfS5iYXI6bnRoLWNoaWxkKDk3KSAgeyBsZWZ0OiAzODVweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0ODRtczsgfS5iYXI6bnRoLWNoaWxkKDk4KSAgeyBsZWZ0OiAzODlweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0MTltczsgfS5iYXI6bnRoLWNoaWxkKDk5KSAgeyBsZWZ0OiAzOTNweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0NTltczsgfS5iYXI6bnRoLWNoaWxkKDEwMCkgIHsgbGVmdDogMzk3cHg7IGFuaW1hdGlvbi1kdXJhdGlvbjogNDE2bXM7IH0KICAgIDwvc3R5bGU+CiAgICA8ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBjbGFzcz0iY29udGFpbmVyIj4KICAgICAgICAKICAgICAgICAgIDxhIGhyZWY9Int7dXJsfX0iIHRhcmdldD0iX0JMQU5LIiBjbGFzcz0iY292ZXItbGluayI+CiAgICAgICAgICAgIDxpbWcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHNyYz0iZGF0YTppbWFnZS9wbmc7YmFzZTY0LCB7e2ltZ319IiB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIGNsYXNzPSJjb3ZlciIgLz4KICAgICAgICAgIDwvYT4KICAgICAgICAKICAgICAgICA8ZGl2IGNsYXNzPSJ0ZXh0LWNvbnRhaW5lciI+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJhcnRpc3QiPnt7YXJ0aXN0c319IDwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0ic29uZyI+e3tzb25nfX08L2Rpdj4KICAgICAgICAgIDxkaXYgaWQ9ImJhcnMiPjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KICA8L2ZvcmVpZ25PYmplY3Q+Cjwvc3ZnPg==` // This contains the template for the SVG that will be returned to the user.

	svgTemplateBase64Dark := `PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMzIwIiBoZWlnaHQ9Ijg0IiBhcmlhLWxhYmVsbGVkYnk9ImNhcmRUaXRsZSIgcm9sZT0iaW1nIj4KICA8dGl0bGUgaWQ9ImNhcmRUaXRsZSI+Tm93IHBsYXlpbmcgb24gU3BvdGlmeTwvdGl0bGU+CiAgPGZvcmVpZ25PYmplY3Qgd2lkdGg9IjMyMCIgaGVpZ2h0PSI4NCI+CiAgICA8c3R5bGU+CiAgICAgIGRpdiB7CiAgICAgICAgZm9udC1mYW1pbHk6IC1hcHBsZS1zeXN0ZW0sIEJsaW5rTWFjU3lzdGVtRm9udCwgU2Vnb2UgVUksIEhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWYsIEFwcGxlIENvbG9yIEVtb2ppLCBTZWdvZSBVSSBFbW9qaTsKICAgICAgfQoKICAgICAgLmNvbnRhaW5lciB7CiAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7CiAgICAgICAgcGFkZGluZzogMTBweCAxMHB4OwogICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMxZTFlMWU7CiAgICAgIH0KCiAgICAgIC5jb3Zlci1saW5rIHsKICAgICAgICBoZWlnaHQ6IDY0cHg7CiAgICAgIH0KCiAgICAgIC5jb3ZlciB7CiAgICAgICAgYm9yZGVyLXJhZGl1czogMXB4OwogICAgICAgIG1hcmdpbi1yaWdodDogMTBweDsKICAgICAgfQoKICAgICAgLnBsYXlpbmcgewogICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICBjb2xvcjogIzUzYjE0ZjsKICAgICAgICBmb250LXdlaWdodDogYm9sZDsKICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4OwogICAgICB9CgogICAgICAubm90LXBsYXkgewogICAgICAgIGNvbG9yOiAjZmYxNjE2OwogICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgICBtYXJnaW4tYm90dG9tOiAwOwogICAgICB9CgogICAgICAuYXJ0aXN0IHsKICAgICAgICBjb2xvcjogI2Y0ZjRmNDsKICAgICAgICBmb250LXdlaWdodDogNTAwOwogICAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgICAgICBtYXJnaW4tYm90dG9tOiAzcHg7CiAgICAgIH0KCiAgICAgIC5zb25nIHsKICAgICAgICBjb2xvcjogI2RiZGJkYzsKICAgICAgICBmb250LXNpemU6IDE0cHg7CiAgICAgICAgbWFyZ2luLWJvdHRvbTogMThweDsKICAgICAgfQoKICAgICAgI2JhcnMgewogICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgICBoZWlnaHQ6IDZweDsKICAgICAgICB3aWR0aDogMjIwcHg7CiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgICBtYXJnaW46IC02cHggMCAwIDBweDsKICAgICAgfQoKICAgICAgLmJhciB7CiAgICAgICAgYmFja2dyb3VuZDogIzUzYjE0ZjsKICAgICAgICBib3R0b206IDFweDsKICAgICAgICBoZWlnaHQ6IDNweDsKICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICAgICAgd2lkdGg6IDNweDsKICAgICAgICBhbmltYXRpb246IHNvdW5kIDBtcyAtODAwbXMgbGluZWFyIGluZmluaXRlIGFsdGVybmF0ZTsKICAgICAgfQoKICAgICAgQGtleWZyYW1lcyBzb3VuZCB7CiAgICAgICAgMCUgewogICAgICAgICAgb3BhY2l0eTogLjM1OwogICAgICAgICAgaGVpZ2h0OiAzcHg7CiAgICAgICAgfQoKICAgICAgICAxMDAlIHsKICAgICAgICAgIG9wYWNpdHk6IDE7CiAgICAgICAgICBoZWlnaHQ6IDZweDsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIC5iYXI6bnRoLWNoaWxkKDEpICB7IGxlZnQ6IDFweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0OThtczsgfS5iYXI6bnRoLWNoaWxkKDIpICB7IGxlZnQ6IDVweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiAzODhtczsgfS5iYXI6bnRoLWNoaWxkKDMpICB7IGxlZnQ6IDlweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiAzOTVtczsgfS5iYXI6bnRoLWNoaWxkKDQpICB7IGxlZnQ6IDEzcHg7IGFuaW1hdGlvbi1kdXJhdGlvbjogMzU1bXM7IH0uYmFyOm50aC1jaGlsZCg1KSAgeyBsZWZ0OiAxN3B4OyBhbmltYXRpb24tZHVyYXRpb246IDQzNm1zOyB9LmJhcjpudGgtY2hpbGQoNikgIHsgbGVmdDogMjFweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0NDdtczsgfS5iYXI6bnRoLWNoaWxkKDcpICB7IGxlZnQ6IDI1cHg7IGFuaW1hdGlvbi1kdXJhdGlvbjogMzY1bXM7IH0uYmFyOm50aC1jaGlsZCg4KSAgeyBsZWZ0OiAyOXB4OyBhbmltYXRpb24tZHVyYXRpb246IDM4OW1zOyB9LmJhcjpudGgtY2hpbGQoOSkgIHsgbGVmdDogMzNweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0NTltczsgfS5iYXI6bnRoLWNoaWxkKDEwKSAgeyBsZWZ0OiAzN3B4OyBhbmltYXRpb24tZHVyYXRpb246IDM3OG1zOyB9LmJhcjpudGgtY2hpbGQoMTEpICB7IGxlZnQ6IDQxcHg7IGFuaW1hdGlvbi1kdXJhdGlvbjogMzk5bXM7IH0uYmFyOm50aC1jaGlsZCgxMikgIHsgbGVmdDogNDVweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0MTNtczsgfS5iYXI6bnRoLWNoaWxkKDEzKSAgeyBsZWZ0OiA0OXB4OyBhbmltYXRpb24tZHVyYXRpb246IDQ1OG1zOyB9LmJhcjpudGgtY2hpbGQoMTQpICB7IGxlZnQ6IDUzcHg7IGFuaW1hdGlvbi1kdXJhdGlvbjogMzcwbXM7IH0uYmFyOm50aC1jaGlsZCgxNSkgIHsgbGVmdDogNTdweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiAzNjRtczsgfS5iYXI6bnRoLWNoaWxkKDE2KSAgeyBsZWZ0OiA2MXB4OyBhbmltYXRpb24tZHVyYXRpb246IDQ1MW1zOyB9LmJhcjpudGgtY2hpbGQoMTcpICB7IGxlZnQ6IDY1cHg7IGFuaW1hdGlvbi1kdXJhdGlvbjogMzUybXM7IH0uYmFyOm50aC1jaGlsZCgxOCkgIHsgbGVmdDogNjlweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiAzNTRtczsgfS5iYXI6bnRoLWNoaWxkKDE5KSAgeyBsZWZ0OiA3M3B4OyBhbmltYXRpb24tZHVyYXRpb246IDQzOW1zOyB9LmJhcjpudGgtY2hpbGQoMjApICB7IGxlZnQ6IDc3cHg7IGFuaW1hdGlvbi1kdXJhdGlvbjogMzk5bXM7IH0uYmFyOm50aC1jaGlsZCgyMSkgIHsgbGVmdDogODFweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0MzFtczsgfS5iYXI6bnRoLWNoaWxkKDIyKSAgeyBsZWZ0OiA4NXB4OyBhbmltYXRpb24tZHVyYXRpb246IDQzMm1zOyB9LmJhcjpudGgtY2hpbGQoMjMpICB7IGxlZnQ6IDg5cHg7IGFuaW1hdGlvbi1kdXJhdGlvbjogMzc2bXM7IH0uYmFyOm50aC1jaGlsZCgyNCkgIHsgbGVmdDogOTNweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA1MDBtczsgfS5iYXI6bnRoLWNoaWxkKDI1KSAgeyBsZWZ0OiA5N3B4OyBhbmltYXRpb24tZHVyYXRpb246IDQ2Mm1zOyB9LmJhcjpudGgtY2hpbGQoMjYpICB7IGxlZnQ6IDEwMXB4OyBhbmltYXRpb24tZHVyYXRpb246IDQ2N21zOyB9LmJhcjpudGgtY2hpbGQoMjcpICB7IGxlZnQ6IDEwNXB4OyBhbmltYXRpb24tZHVyYXRpb246IDQ4NW1zOyB9LmJhcjpudGgtY2hpbGQoMjgpICB7IGxlZnQ6IDEwOXB4OyBhbmltYXRpb24tZHVyYXRpb246IDQ5NG1zOyB9LmJhcjpudGgtY2hpbGQoMjkpICB7IGxlZnQ6IDExM3B4OyBhbmltYXRpb24tZHVyYXRpb246IDM2OG1zOyB9LmJhcjpudGgtY2hpbGQoMzApICB7IGxlZnQ6IDExN3B4OyBhbmltYXRpb24tZHVyYXRpb246IDM2M21zOyB9LmJhcjpudGgtY2hpbGQoMzEpICB7IGxlZnQ6IDEyMXB4OyBhbmltYXRpb24tZHVyYXRpb246IDM2M21zOyB9LmJhcjpudGgtY2hpbGQoMzIpICB7IGxlZnQ6IDEyNXB4OyBhbmltYXRpb24tZHVyYXRpb246IDQwNm1zOyB9LmJhcjpudGgtY2hpbGQoMzMpICB7IGxlZnQ6IDEyOXB4OyBhbmltYXRpb24tZHVyYXRpb246IDQ2N21zOyB9LmJhcjpudGgtY2hpbGQoMzQpICB7IGxlZnQ6IDEzM3B4OyBhbmltYXRpb24tZHVyYXRpb246IDM3NG1zOyB9LmJhcjpudGgtY2hpbGQoMzUpICB7IGxlZnQ6IDEzN3B4OyBhbmltYXRpb24tZHVyYXRpb246IDQyMW1zOyB9LmJhcjpudGgtY2hpbGQoMzYpICB7IGxlZnQ6IDE0MXB4OyBhbmltYXRpb24tZHVyYXRpb246IDQ5MG1zOyB9LmJhcjpudGgtY2hpbGQoMzcpICB7IGxlZnQ6IDE0NXB4OyBhbmltYXRpb24tZHVyYXRpb246IDM5OG1zOyB9LmJhcjpudGgtY2hpbGQoMzgpICB7IGxlZnQ6IDE0OXB4OyBhbmltYXRpb24tZHVyYXRpb246IDM4Nm1zOyB9LmJhcjpudGgtY2hpbGQoMzkpICB7IGxlZnQ6IDE1M3B4OyBhbmltYXRpb24tZHVyYXRpb246IDQyMW1zOyB9LmJhcjpudGgtY2hpbGQoNDApICB7IGxlZnQ6IDE1N3B4OyBhbmltYXRpb24tZHVyYXRpb246IDQwMm1zOyB9LmJhcjpudGgtY2hpbGQoNDEpICB7IGxlZnQ6IDE2MXB4OyBhbmltYXRpb24tZHVyYXRpb246IDQ4OW1zOyB9LmJhcjpudGgtY2hpbGQoNDIpICB7IGxlZnQ6IDE2NXB4OyBhbmltYXRpb24tZHVyYXRpb246IDQzM21zOyB9LmJhcjpudGgtY2hpbGQoNDMpICB7IGxlZnQ6IDE2OXB4OyBhbmltYXRpb24tZHVyYXRpb246IDQ0MW1zOyB9LmJhcjpudGgtY2hpbGQoNDQpICB7IGxlZnQ6IDE3M3B4OyBhbmltYXRpb24tZHVyYXRpb246IDQwOG1zOyB9LmJhcjpudGgtY2hpbGQoNDUpICB7IGxlZnQ6IDE3N3B4OyBhbmltYXRpb24tZHVyYXRpb246IDQzOW1zOyB9LmJhcjpudGgtY2hpbGQoNDYpICB7IGxlZnQ6IDE4MXB4OyBhbmltYXRpb24tZHVyYXRpb246IDQxN21zOyB9LmJhcjpudGgtY2hpbGQoNDcpICB7IGxlZnQ6IDE4NXB4OyBhbmltYXRpb24tZHVyYXRpb246IDQ3MW1zOyB9LmJhcjpudGgtY2hpbGQoNDgpICB7IGxlZnQ6IDE4OXB4OyBhbmltYXRpb24tZHVyYXRpb246IDQzOW1zOyB9LmJhcjpudGgtY2hpbGQoNDkpICB7IGxlZnQ6IDE5M3B4OyBhbmltYXRpb24tZHVyYXRpb246IDQ4NW1zOyB9LmJhcjpudGgtY2hpbGQoNTApICB7IGxlZnQ6IDE5N3B4OyBhbmltYXRpb24tZHVyYXRpb246IDM2Nm1zOyB9LmJhcjpudGgtY2hpbGQoNTEpICB7IGxlZnQ6IDIwMXB4OyBhbmltYXRpb24tZHVyYXRpb246IDQwNm1zOyB9LmJhcjpudGgtY2hpbGQoNTIpICB7IGxlZnQ6IDIwNXB4OyBhbmltYXRpb24tZHVyYXRpb246IDQxOG1zOyB9LmJhcjpudGgtY2hpbGQoNTMpICB7IGxlZnQ6IDIwOXB4OyBhbmltYXRpb24tZHVyYXRpb246IDQ4MW1zOyB9LmJhcjpudGgtY2hpbGQoNTQpICB7IGxlZnQ6IDIxM3B4OyBhbmltYXRpb24tZHVyYXRpb246IDQxMW1zOyB9LmJhcjpudGgtY2hpbGQoNTUpICB7IGxlZnQ6IDIxN3B4OyBhbmltYXRpb24tZHVyYXRpb246IDM2Nm1zOyB9LmJhcjpudGgtY2hpbGQoNTYpICB7IGxlZnQ6IDIyMXB4OyBhbmltYXRpb24tZHVyYXRpb246IDQ4OG1zOyB9LmJhcjpudGgtY2hpbGQoNTcpICB7IGxlZnQ6IDIyNXB4OyBhbmltYXRpb24tZHVyYXRpb246IDQ2OG1zOyB9LmJhcjpudGgtY2hpbGQoNTgpICB7IGxlZnQ6IDIyOXB4OyBhbmltYXRpb24tZHVyYXRpb246IDQ3MG1zOyB9LmJhcjpudGgtY2hpbGQoNTkpICB7IGxlZnQ6IDIzM3B4OyBhbmltYXRpb24tZHVyYXRpb246IDQ3NW1zOyB9LmJhcjpudGgtY2hpbGQoNjApICB7IGxlZnQ6IDIzN3B4OyBhbmltYXRpb24tZHVyYXRpb246IDQ1NW1zOyB9LmJhcjpudGgtY2hpbGQoNjEpICB7IGxlZnQ6IDI0MXB4OyBhbmltYXRpb24tZHVyYXRpb246IDQ0OG1zOyB9LmJhcjpudGgtY2hpbGQoNjIpICB7IGxlZnQ6IDI0NXB4OyBhbmltYXRpb24tZHVyYXRpb246IDQ1Mm1zOyB9LmJhcjpudGgtY2hpbGQoNjMpICB7IGxlZnQ6IDI0OXB4OyBhbmltYXRpb24tZHVyYXRpb246IDQ4OG1zOyB9LmJhcjpudGgtY2hpbGQoNjQpICB7IGxlZnQ6IDI1M3B4OyBhbmltYXRpb24tZHVyYXRpb246IDM5OW1zOyB9LmJhcjpudGgtY2hpbGQoNjUpICB7IGxlZnQ6IDI1N3B4OyBhbmltYXRpb24tZHVyYXRpb246IDQzNW1zOyB9LmJhcjpudGgtY2hpbGQoNjYpICB7IGxlZnQ6IDI2MXB4OyBhbmltYXRpb24tZHVyYXRpb246IDM2M21zOyB9LmJhcjpudGgtY2hpbGQoNjcpICB7IGxlZnQ6IDI2NXB4OyBhbmltYXRpb24tZHVyYXRpb246IDQ4N21zOyB9LmJhcjpudGgtY2hpbGQoNjgpICB7IGxlZnQ6IDI2OXB4OyBhbmltYXRpb24tZHVyYXRpb246IDM1NW1zOyB9LmJhcjpudGgtY2hpbGQoNjkpICB7IGxlZnQ6IDI3M3B4OyBhbmltYXRpb24tZHVyYXRpb246IDQ0MG1zOyB9LmJhcjpudGgtY2hpbGQoNzApICB7IGxlZnQ6IDI3N3B4OyBhbmltYXRpb24tZHVyYXRpb246IDQ3M21zOyB9LmJhcjpudGgtY2hpbGQoNzEpICB7IGxlZnQ6IDI4MXB4OyBhbmltYXRpb24tZHVyYXRpb246IDM2MG1zOyB9LmJhcjpudGgtY2hpbGQoNzIpICB7IGxlZnQ6IDI4NXB4OyBhbmltYXRpb24tZHVyYXRpb246IDQ0Mm1zOyB9LmJhcjpudGgtY2hpbGQoNzMpICB7IGxlZnQ6IDI4OXB4OyBhbmltYXRpb24tZHVyYXRpb246IDQxM21zOyB9LmJhcjpudGgtY2hpbGQoNzQpICB7IGxlZnQ6IDI5M3B4OyBhbmltYXRpb24tZHVyYXRpb246IDM1M21zOyB9LmJhcjpudGgtY2hpbGQoNzUpICB7IGxlZnQ6IDI5N3B4OyBhbmltYXRpb24tZHVyYXRpb246IDM3Mm1zOyB9LmJhcjpudGgtY2hpbGQoNzYpICB7IGxlZnQ6IDMwMXB4OyBhbmltYXRpb24tZHVyYXRpb246IDM5OW1zOyB9LmJhcjpudGgtY2hpbGQoNzcpICB7IGxlZnQ6IDMwNXB4OyBhbmltYXRpb24tZHVyYXRpb246IDQxM21zOyB9LmJhcjpudGgtY2hpbGQoNzgpICB7IGxlZnQ6IDMwOXB4OyBhbmltYXRpb24tZHVyYXRpb246IDM3NW1zOyB9LmJhcjpudGgtY2hpbGQoNzkpICB7IGxlZnQ6IDMxM3B4OyBhbmltYXRpb24tZHVyYXRpb246IDQ5Mm1zOyB9LmJhcjpudGgtY2hpbGQoODApICB7IGxlZnQ6IDMxN3B4OyBhbmltYXRpb24tZHVyYXRpb246IDM5NG1zOyB9LmJhcjpudGgtY2hpbGQoODEpICB7IGxlZnQ6IDMyMXB4OyBhbmltYXRpb24tZHVyYXRpb246IDQxMG1zOyB9LmJhcjpudGgtY2hpbGQoODIpICB7IGxlZnQ6IDMyNXB4OyBhbmltYXRpb24tZHVyYXRpb246IDQxOW1zOyB9LmJhcjpudGgtY2hpbGQoODMpICB7IGxlZnQ6IDMyOXB4OyBhbmltYXRpb24tZHVyYXRpb246IDM1Nm1zOyB9LmJhcjpudGgtY2hpbGQoODQpICB7IGxlZnQ6IDMzM3B4OyBhbmltYXRpb24tZHVyYXRpb246IDQ1NW1zOyB9LmJhcjpudGgtY2hpbGQoODUpICB7IGxlZnQ6IDMzN3B4OyBhbmltYXRpb24tZHVyYXRpb246IDQxNW1zOyB9LmJhcjpudGgtY2hpbGQoODYpICB7IGxlZnQ6IDM0MXB4OyBhbmltYXRpb24tZHVyYXRpb246IDM3OW1zOyB9LmJhcjpudGgtY2hpbGQoODcpICB7IGxlZnQ6IDM0NXB4OyBhbmltYXRpb24tZHVyYXRpb246IDM5OG1zOyB9LmJhcjpudGgtY2hpbGQoODgpICB7IGxlZnQ6IDM0OXB4OyBhbmltYXRpb24tZHVyYXRpb246IDQ4NG1zOyB9LmJhcjpudGgtY2hpbGQoODkpICB7IGxlZnQ6IDM1M3B4OyBhbmltYXRpb24tZHVyYXRpb246IDQxNG1zOyB9LmJhcjpudGgtY2hpbGQoOTApICB7IGxlZnQ6IDM1N3B4OyBhbmltYXRpb24tZHVyYXRpb246IDQ3M21zOyB9LmJhcjpudGgtY2hpbGQoOTEpICB7IGxlZnQ6IDM2MXB4OyBhbmltYXRpb24tZHVyYXRpb246IDQxMW1zOyB9LmJhcjpudGgtY2hpbGQoOTIpICB7IGxlZnQ6IDM2NXB4OyBhbmltYXRpb24tZHVyYXRpb246IDQ4Nm1zOyB9LmJhcjpudGgtY2hpbGQoOTMpICB7IGxlZnQ6IDM2OXB4OyBhbmltYXRpb24tZHVyYXRpb246IDQzN21zOyB9LmJhcjpudGgtY2hpbGQoOTQpICB7IGxlZnQ6IDM3M3B4OyBhbmltYXRpb24tZHVyYXRpb246IDQxN21zOyB9LmJhcjpudGgtY2hpbGQoOTUpICB7IGxlZnQ6IDM3N3B4OyBhbmltYXRpb24tZHVyYXRpb246IDM4NG1zOyB9LmJhcjpudGgtY2hpbGQoOTYpICB7IGxlZnQ6IDM4MXB4OyBhbmltYXRpb24tZHVyYXRpb246IDQ1N21zOyB9LmJhcjpudGgtY2hpbGQoOTcpICB7IGxlZnQ6IDM4NXB4OyBhbmltYXRpb24tZHVyYXRpb246IDQ4NG1zOyB9LmJhcjpudGgtY2hpbGQoOTgpICB7IGxlZnQ6IDM4OXB4OyBhbmltYXRpb24tZHVyYXRpb246IDQxOW1zOyB9LmJhcjpudGgtY2hpbGQoOTkpICB7IGxlZnQ6IDM5M3B4OyBhbmltYXRpb24tZHVyYXRpb246IDQ1OW1zOyB9LmJhcjpudGgtY2hpbGQoMTAwKSAgeyBsZWZ0OiAzOTdweDsgYW5pbWF0aW9uLWR1cmF0aW9uOiA0MTZtczsgfQogICAgPC9zdHlsZT4KICAgIDxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIGNsYXNzPSJjb250YWluZXIiPgogICAgICA8YSBocmVmPSJ7e3VybH19IiB0YXJnZXQ9Il9CTEFOSyIgY2xhc3M9ImNvdmVyLWxpbmsiPgogICAgICAgIDxpbWcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHNyYz0iZGF0YTppbWFnZS9wbmc7YmFzZTY0LCB7e2ltZ319IiB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIGNsYXNzPSJjb3ZlciIgLz4KICAgICAgPC9hPgogICAgICA8ZGl2IGNsYXNzPSJ0ZXh0LWNvbnRhaW5lciI+CiAgICAgICAgPGRpdiBjbGFzcz0iYXJ0aXN0Ij57e2FydGlzdHN9fTwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9InNvbmciPnt7c29uZ319PC9kaXY+CiAgICAgICAgPGRpdiBpZD0iYmFycyI+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJiYXIiPjwvZGl2PjxkaXYgY2xhc3M9ImJhciI+PC9kaXY+PGRpdiBjbGFzcz0iYmFyIj48L2Rpdj48L2Rpdj4KICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KICA8L2ZvcmVpZ25PYmplY3Q+Cjwvc3ZnPgo=`

	if darkMode {
		svgTemplateBase64 = svgTemplateBase64Dark
	}

	svgTemplateBytes, _ := base64.StdEncoding.DecodeString(svgTemplateBase64)
	svgTemplate := string(svgTemplateBytes)

	trimName := func(name string) string {
		if len(name) > 35 {
			return name[:35] + "..."
		}
		return name
	}

	svgTemplate = strings.Replace(svgTemplate, "{{url}}", currentTrack["url"].(string), -1)
	svgTemplate = strings.Replace(svgTemplate, "{{artists}}", currentTrack["artists"].(string), -1)
	svgTemplate = strings.Replace(svgTemplate, "{{song}}", trimName(currentTrack["title"].(string)), -1)

	imageURL := currentTrack["image"].(string)
	resp, err := http.Get(imageURL)
	if err != nil {
		return ""
	}

	defer resp.Body.Close()

	img, _ := io.ReadAll(resp.Body)
	imgBase64 := base64.StdEncoding.EncodeToString(img)

	svgTemplate = strings.Replace(svgTemplate, "{{img}}", imgBase64, -1)

	return svgTemplate
}
